{"ast":null,"code":"var _jsxFileName = \"W:\\\\Projects\\\\SecureCampus Web App\\\\SecureCampus\\\\secure-campus\\\\src\\\\components\\\\CameraFeed.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport io from 'socket.io-client';\nimport './CameraFeed.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CameraFeed() {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const socketRef = useRef();\n  useEffect(() => {\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia({\n        video: true\n      }).then(stream => {\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n        }\n      }).catch(error => {\n        console.error('Error accessing the camera:', error);\n      });\n    } else {\n      console.error('getUserMedia is not supported');\n    }\n    socketRef.current = io.connect('/'); // Connect to the server\n\n    socketRef.current.on('face_detected', data => {\n      drawBox(data, 'red', 'Unknown');\n    });\n    socketRef.current.on('face_verified', data => {\n      drawBox(data, 'green', data.file_name);\n    });\n    return () => {\n      socketRef.current.disconnect();\n    };\n  }, []);\n  const drawBox = (data, color, label) => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    context.beginPath();\n    context.rect(data.x, data.y, data.w, data.h);\n    context.lineWidth = 2;\n    context.strokeStyle = color;\n    context.fillStyle = color;\n    context.stroke();\n    context.fillText(label, data.x, data.y > 20 ? data.y - 5 : data.y + 10);\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    id: \"camera-feed\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"camera-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        width: \"720\",\n        height: \"560\",\n        autoPlay: true,\n        muted: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        width: \"720\",\n        height: \"560\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n}\n_s(CameraFeed, \"VyLjgvw0GH6asa+qjw2nNtuBwYI=\");\n_c = CameraFeed;\nexport default CameraFeed;\nvar _c;\n$RefreshReg$(_c, \"CameraFeed\");","map":{"version":3,"names":["React","useRef","useEffect","io","jsxDEV","_jsxDEV","CameraFeed","_s","videoRef","canvasRef","socketRef","navigator","mediaDevices","getUserMedia","video","then","stream","current","srcObject","catch","error","console","connect","on","data","drawBox","file_name","disconnect","color","label","canvas","context","getContext","beginPath","rect","x","y","w","h","lineWidth","strokeStyle","fillStyle","stroke","fillText","id","children","className","ref","width","height","autoPlay","muted","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["W:/Projects/SecureCampus Web App/SecureCampus/secure-campus/src/components/CameraFeed.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\r\nimport io from 'socket.io-client';\r\nimport './CameraFeed.css';\r\n\r\nfunction CameraFeed() {\r\n    const videoRef = useRef(null);\r\n    const canvasRef = useRef(null);\r\n    const socketRef = useRef();\r\n\r\n    useEffect(() => {\r\n        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n            navigator.mediaDevices.getUserMedia({ video: true })\r\n                .then(stream => {\r\n                    if (videoRef.current) {\r\n                        videoRef.current.srcObject = stream;\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error accessing the camera:', error);\r\n                });\r\n        } else {\r\n            console.error('getUserMedia is not supported');\r\n        }\r\n\r\n        socketRef.current = io.connect('/'); // Connect to the server\r\n\r\n        socketRef.current.on('face_detected', data => {\r\n            drawBox(data, 'red', 'Unknown');\r\n        });\r\n\r\n        socketRef.current.on('face_verified', data => {\r\n            drawBox(data, 'green', data.file_name);\r\n        });\r\n\r\n        return () => {\r\n            socketRef.current.disconnect();\r\n        };\r\n    }, []);\r\n\r\n    const drawBox = (data, color, label) => {\r\n        const canvas = canvasRef.current;\r\n        const context = canvas.getContext('2d');\r\n        context.beginPath();\r\n        context.rect(data.x, data.y, data.w, data.h);\r\n        context.lineWidth = 2;\r\n        context.strokeStyle = color;\r\n        context.fillStyle = color;\r\n        context.stroke();\r\n        context.fillText(label, data.x, data.y > 20 ? data.y - 5 : data.y + 10);\r\n    };\r\n\r\n    return (\r\n        <section id=\"camera-feed\">\r\n            <div className=\"camera-container\">\r\n                <video ref={videoRef} width=\"720\" height=\"560\" autoPlay muted></video>\r\n                <canvas ref={canvasRef} width=\"720\" height=\"560\"></canvas>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default CameraFeed;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}