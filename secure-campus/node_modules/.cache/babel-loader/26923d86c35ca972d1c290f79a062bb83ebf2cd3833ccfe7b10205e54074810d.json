{"ast":null,"code":"var _jsxFileName = \"W:\\\\Projects\\\\SecureCampus Web App\\\\SecureCampus\\\\secure-campus\\\\src\\\\components\\\\CameraFeed.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport io from 'socket.io-client';\nimport './CameraFeed.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CameraFeed() {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const socketRef = useRef();\n  useEffect(() => {\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia({\n        video: true\n      }).then(stream => {\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n        }\n      }).catch(error => {\n        console.error('Error accessing the camera:', error);\n      });\n    } else {\n      console.error('getUserMedia is not supported');\n    }\n    socketRef.current = io.connect('/', {\n      'reconnection': true,\n      'reconnectionDelay': 1000,\n      'reconnectionDelayMax': 5000,\n      'reconnectionAttempts': 5\n    });\n    socketRef.current.on('connect_error', error => {\n      console.error('Connection error:', error);\n    });\n    socketRef.current.on('reconnect_failed', () => {\n      console.error('Failed to reconnect');\n    });\n    socketRef.current.on('face_detected', data => {\n      console.log('Received face_detected event with data:', data);\n      drawBox(data, 'red', 'Unknown');\n    });\n    socketRef.current.on('face_verified', data => {\n      console.log('Received face_verified event with data:', data);\n      drawBox(data, 'green', data.file_name);\n    });\n    return () => {\n      socketRef.current.disconnect();\n    };\n  }, []);\n  const drawBox = (data, color, label) => {\n    if (!data || !data.x || !data.y || !data.w || !data.h) {\n      console.error('Invalid data:', data);\n      return;\n    }\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    context.clearRect(0, 0, canvas.width, canvas.height); // Clear the canvas\n    context.beginPath();\n    context.rect(data.x, data.y, data.w, data.h);\n    context.lineWidth = 2;\n    context.strokeStyle = color;\n    context.fillStyle = color;\n    context.stroke();\n    context.fillText(label, data.x, data.y > 20 ? data.y - 5 : data.y + 10);\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    id: \"camera-feed\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"camera-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        width: \"720\",\n        height: \"560\",\n        autoPlay: true,\n        muted: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        width: \"720\",\n        height: \"560\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, this);\n}\n_s(CameraFeed, \"VyLjgvw0GH6asa+qjw2nNtuBwYI=\");\n_c = CameraFeed;\nexport default CameraFeed;\nvar _c;\n$RefreshReg$(_c, \"CameraFeed\");","map":{"version":3,"names":["React","useRef","useEffect","io","jsxDEV","_jsxDEV","CameraFeed","_s","videoRef","canvasRef","socketRef","navigator","mediaDevices","getUserMedia","video","then","stream","current","srcObject","catch","error","console","connect","on","data","log","drawBox","file_name","disconnect","color","label","x","y","w","h","canvas","context","getContext","clearRect","width","height","beginPath","rect","lineWidth","strokeStyle","fillStyle","stroke","fillText","id","children","className","ref","autoPlay","muted","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["W:/Projects/SecureCampus Web App/SecureCampus/secure-campus/src/components/CameraFeed.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\r\nimport io from 'socket.io-client';\r\nimport './CameraFeed.css';\r\n\r\nfunction CameraFeed() {\r\n    const videoRef = useRef(null);\r\n    const canvasRef = useRef(null);\r\n    const socketRef = useRef();\r\n\r\n    useEffect(() => {\r\n        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n            navigator.mediaDevices.getUserMedia({ video: true })\r\n                .then(stream => {\r\n                    if (videoRef.current) {\r\n                        videoRef.current.srcObject = stream;\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error accessing the camera:', error);\r\n                });\r\n        } else {\r\n            console.error('getUserMedia is not supported');\r\n        }\r\n\r\n        socketRef.current = io.connect('/', {\r\n            'reconnection': true,\r\n            'reconnectionDelay': 1000,\r\n            'reconnectionDelayMax' : 5000,\r\n            'reconnectionAttempts': 5\r\n        });\r\n\r\n        socketRef.current.on('connect_error', (error) => {\r\n            console.error('Connection error:', error);\r\n        });\r\n\r\n        socketRef.current.on('reconnect_failed', () => {\r\n            console.error('Failed to reconnect');\r\n        });\r\n\r\n        socketRef.current.on('face_detected', data => {\r\n            console.log('Received face_detected event with data:', data);\r\n            drawBox(data, 'red', 'Unknown');\r\n        });\r\n\r\n        socketRef.current.on('face_verified', data => {\r\n            console.log('Received face_verified event with data:', data);\r\n            drawBox(data, 'green', data.file_name);\r\n        });\r\n\r\n        return () => {\r\n            socketRef.current.disconnect();\r\n        };\r\n    }, []);\r\n\r\n    const drawBox = (data, color, label) => {\r\n        if (!data || !data.x || !data.y || !data.w || !data.h) {\r\n            console.error('Invalid data:', data);\r\n            return;\r\n        }\r\n\r\n        const canvas = canvasRef.current;\r\n        const context = canvas.getContext('2d');\r\n        context.clearRect(0, 0, canvas.width, canvas.height); // Clear the canvas\r\n        context.beginPath();\r\n        context.rect(data.x, data.y, data.w, data.h);\r\n        context.lineWidth = 2;\r\n        context.strokeStyle = color;\r\n        context.fillStyle = color;\r\n        context.stroke();\r\n        context.fillText(label, data.x, data.y > 20 ? data.y - 5 : data.y + 10);\r\n    };\r\n\r\n    return (\r\n        <section id=\"camera-feed\">\r\n            <div className=\"camera-container\">\r\n                <video ref={videoRef} width=\"720\" height=\"560\" autoPlay muted></video>\r\n                <canvas ref={canvasRef} width=\"720\" height=\"560\"></canvas>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default CameraFeed;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}