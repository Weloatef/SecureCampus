{"ast":null,"code":"var _jsxFileName = \"W:\\\\Projects\\\\SecureCampus Web App\\\\SecureCampus\\\\secure-campus\\\\src\\\\components\\\\CameraFeed.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport io from 'socket.io-client';\nimport './CameraFeed.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CameraFeed() {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const socketRef = useRef();\n  useEffect(() => {\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia({\n        video: true\n      }).then(stream => {\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n          console.log('Video stream received:', stream);\n\n          // Wait for the video to be loaded\n          videoRef.current.onloadedmetadata = () => {\n            // Set the canvas's width and height to match the video's actual resolution\n            canvasRef.current.width = videoRef.current.videoWidth;\n            canvasRef.current.height = videoRef.current.videoHeight;\n          };\n        }\n      }).catch(error => {\n        console.error('Error accessing the camera:', error);\n      });\n    } else {\n      console.error('getUserMedia is not supported');\n    }\n    socketRef.current = io.connect('/', {\n      'reconnection': true,\n      'reconnectionDelay': 1000,\n      'reconnectionDelayMax': 5000,\n      'reconnectionAttempts': 5\n    });\n    socketRef.current.on('connect_error', error => {\n      console.error('Connection error:', error);\n    });\n    socketRef.current.on('reconnect_failed', () => {\n      console.error('Failed to reconnect');\n    });\n    socketRef.current.on('face_detected', data => {\n      console.log('Received face_detected event with data:', data);\n      drawBox(data, 'red', 'Unknown');\n    });\n    socketRef.current.on('face_verified', data => {\n      console.log('Received face_verified event with data:', data);\n      drawBox(data, 'green', data.file_name);\n    });\n    return () => {\n      socketRef.current.disconnect();\n    };\n  }, []);\n  const drawBox = (data, color, label) => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    if (!data || !data.x || !data.y || !data.w || !data.h) {\n      console.error('Invalid data:', data);\n      return;\n    }\n\n    // Clear the canvas only when new data is received\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    context.beginPath();\n    context.rect(data.x, data.y, data.w, data.h);\n    context.lineWidth = 2;\n    context.strokeStyle = color;\n    context.fillStyle = color;\n    context.stroke();\n    context.fillText(label, data.x, data.y > 20 ? data.y - 5 : data.y + 10);\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    id: \"camera-feed\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"camera-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        autoPlay: true,\n        muted: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n}\n_s(CameraFeed, \"VyLjgvw0GH6asa+qjw2nNtuBwYI=\");\n_c = CameraFeed;\nexport default CameraFeed;\nvar _c;\n$RefreshReg$(_c, \"CameraFeed\");","map":{"version":3,"names":["React","useRef","useEffect","io","jsxDEV","_jsxDEV","CameraFeed","_s","videoRef","canvasRef","socketRef","navigator","mediaDevices","getUserMedia","video","then","stream","current","srcObject","console","log","onloadedmetadata","width","videoWidth","height","videoHeight","catch","error","connect","on","data","drawBox","file_name","disconnect","color","label","canvas","context","getContext","x","y","w","h","clearRect","beginPath","rect","lineWidth","strokeStyle","fillStyle","stroke","fillText","id","children","className","ref","autoPlay","muted","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["W:/Projects/SecureCampus Web App/SecureCampus/secure-campus/src/components/CameraFeed.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\r\nimport io from 'socket.io-client';\r\nimport './CameraFeed.css';\r\n\r\nfunction CameraFeed() {\r\n    const videoRef = useRef(null);\r\n    const canvasRef = useRef(null);\r\n    const socketRef = useRef();\r\n\r\n    useEffect(() => {\r\n        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n            navigator.mediaDevices.getUserMedia({ video: true })\r\n                .then(stream => {\r\n                    if (videoRef.current) {\r\n                        videoRef.current.srcObject = stream;\r\n                        console.log('Video stream received:', stream);\r\n\r\n                        // Wait for the video to be loaded\r\n                        videoRef.current.onloadedmetadata = () => {\r\n                            // Set the canvas's width and height to match the video's actual resolution\r\n                            canvasRef.current.width = videoRef.current.videoWidth;\r\n                            canvasRef.current.height = videoRef.current.videoHeight;\r\n                        };\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error accessing the camera:', error);\r\n                });\r\n        } else {\r\n            console.error('getUserMedia is not supported');\r\n        }\r\n\r\n        socketRef.current = io.connect('/', {\r\n            'reconnection': true,\r\n            'reconnectionDelay': 1000,\r\n            'reconnectionDelayMax' : 5000,\r\n            'reconnectionAttempts': 5\r\n        });\r\n\r\n        socketRef.current.on('connect_error', (error) => {\r\n            console.error('Connection error:', error);\r\n        });\r\n\r\n        socketRef.current.on('reconnect_failed', () => {\r\n            console.error('Failed to reconnect');\r\n        });\r\n\r\n        socketRef.current.on('face_detected', data => {\r\n            console.log('Received face_detected event with data:', data);\r\n            drawBox(data, 'red', 'Unknown');\r\n        });\r\n\r\n        socketRef.current.on('face_verified', data => {\r\n            console.log('Received face_verified event with data:', data);\r\n            drawBox(data, 'green', data.file_name);\r\n        });\r\n\r\n        return () => {\r\n            socketRef.current.disconnect();\r\n        };\r\n    }, []);\r\n\r\n    const drawBox = (data, color, label) => {\r\n        const canvas = canvasRef.current;\r\n        const context = canvas.getContext('2d');\r\n    \r\n        if (!data || !data.x || !data.y || !data.w || !data.h) {\r\n            console.error('Invalid data:', data);\r\n            return;\r\n        }\r\n    \r\n        // Clear the canvas only when new data is received\r\n        context.clearRect(0, 0, canvas.width, canvas.height);\r\n        context.beginPath();\r\n        context.rect(data.x, data.y, data.w, data.h);\r\n        context.lineWidth = 2;\r\n        context.strokeStyle = color;\r\n        context.fillStyle = color;\r\n        context.stroke();\r\n        context.fillText(label, data.x, data.y > 20 ? data.y - 5 : data.y + 10);\r\n    };\r\n\r\n    return (\r\n        <section id=\"camera-feed\">\r\n            <div className=\"camera-container\">\r\n                <video ref={videoRef} autoPlay muted></video>\r\n                <canvas ref={canvasRef}></canvas>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default CameraFeed;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}